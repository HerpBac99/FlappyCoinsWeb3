# FlappyCoin

Многопользовательская игра в реальном времени для Telegram Mini App с криптотематикой, вдохновленная FlappyBird.

## Описание

FlappyCoin - это игра, где пользователи управляют летающей монетой, пытаясь избежать препятствий. Игра поддерживает:
- Многопользовательский режим с игровыми комнатами
- Таблицу лидеров
- Криптовалютную тематику
- Интеграцию с Telegram

## Структура проекта

- `client/` - Frontend-часть (Vanilla JS/CSS)
- `server/` - Backend-часть (Node.js)
- `nginx/` - Конфигурация Nginx
- `ssl/` - Директория для SSL-сертификатов

## Настройка SSL-сертификатов

Для работы с HTTPS (необходимо для Telegram Mini App) в проекте предусмотрены скрипты для генерации сертификатов. Рекомендуется использовать Let's Encrypt для получения валидных сертификатов.

### Настройка Let's Encrypt сертификатов

1. Убедитесь, что домен `flappy.keenetic.link` правильно настроен и указывает на IP-адрес вашего сервера
2. Убедитесь, что порт 80 открыт и доступен из интернета (необходимо для проверки владения доменом)
3. Запустите скрипт настройки SSL:

```powershell
# Запуск в PowerShell
.\setup-letsencrypt.ps1
```

Скрипт выполнит следующие действия:
- Создаст директории для сертификатов и файлов проверки
- Сгенерирует временные самоподписанные сертификаты
- Запросит сертификаты Let's Encrypt через Docker

### Обновление сертификатов

Сертификаты Let's Encrypt действительны в течение 90 дней. Для обновления сертификатов перед истечением срока используйте:

```powershell
# Запуск в PowerShell
.\renew-certs.ps1
```

### Ручное копирование сертификатов

Если у вас уже есть готовые сертификаты, поместите их в следующие файлы:

```
ssl/
  ├── live/
  │   └── flappy.keenetic.link/
  │       ├── privkey.pem    # Приватный ключ
  │       ├── fullchain.pem  # Полная цепочка сертификатов
  │       ├── cert.pem       # Основной сертификат
  │       └── chain.pem      # Промежуточные сертификаты
```

## Запуск проекта

### С Docker

```bash
# Сборка и запуск в Docker
docker-compose up -d
```

### Без Docker

```bash
# Установка зависимостей
npm install

# Запуск сервера
npm run dev
```

## Разработка

При разработке следуйте структуре проекта и указаниям в документации:
- `architecture.md` - Описание архитектуры проекта
- `struct.md` - Описание структуры файлов и директорий

## Лицензия

Этот проект распространяется по лицензии MIT. 

# Остановите все контейнеры
docker-compose down

# Запустите certbot standalone для получения сертификатов
docker run -it --rm -p 80:80 \
  -v "$PWD/ssl:/etc/letsencrypt" \
  certbot/certbot certonly --standalone \
  -d flappy.keenetic.link --agree-tos --email herpbac9@gmail.com 